
## 8.采集能量
  - [获取对象](#获取对象)
  - [采集逻辑](#采集逻辑)
  - [最终代码](#最终代码)

在本节教程中，会教会您从Source中采集能量。

能量除了从`box`中获取，还可以从`Source`中开采得到。

为了开采`Source`，一个含有`WORK`组件的Creep是必要的。

### 获取对象

本节教程提供了一个Spawn、一个含有WORK组件的Creep和一个Source。需要我们采集1000能量并存储到Spawn中。

```python
from builtin import *

SPAWN = get.spawn()
CREEP = get.creep()
SOURCE = get.source()

```

### 采集逻辑

`harvest` 是 `Creep` 类的一个实例方法，构造如下：

| 参数名 | 类型 | 可选 | 默认值 | 描述 |
|-------|------|------|-------|------|
| `target` | `Source` | 否 | - | 采集目标(资源点) |
| `move` | `MotionOptions` \| `bool` \| `None` | 是 | `None` | 如果传入`False`(`None`等同于`False`)，表明禁用移动。传入`True`或是一个移动指令的`options`, 那么当距离不足时会自动靠近目标 |

**返回值**：
- `OK` (0): 操作成功
- `ERR_NOT_OWNER` (-1): 非 Creep 拥有者
- `ERR_INVALID_ARGS` (-10): 参数不正确
- `ERR_NO_BODYPART` (-12): 无 WORK 部件
- `ERR_NOT_ENOUGH_RESOURCES` (-6): 资源不足
- `ERR_INVALID_TARGET` (-7): 目标无效
- `ERR_NOT_IN_RANGE` (-9): 目标不在范围内

通过Creep的只读属性`energy:int`和`energyMax:int`，我们可以在存储满后，将能量带回Spawn。

```python
def step(k: GlobalKnowledge):
    if CREEP.energy < CREEP.energyMax:
        CREEP.harvest(SOURCE)
    else:
        CREEP.deposit(SPAWN)

```

### 最终代码

以下是采集能量并存储到Spawn的完整代码：

```python
from builtin import *

SPAWN = get.spawn()
CREEP = get.creep()
SOURCE = get.source()


def init(k: GlobalKnowledge):
    pass


def step(k: GlobalKnowledge):
    if CREEP.energy < CREEP.energyMax:
        CREEP.harvest(SOURCE)
    else:
        CREEP.deposit(SPAWN)
```

