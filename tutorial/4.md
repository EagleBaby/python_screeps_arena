## 4. Creep Composition
  - [Part Types](#part-types)
  - [Part Order](#part-order)
  - [Capability Filtering and Inspection](#capability-filtering-and-inspection)
  - [Command Conflicts](#command-conflicts)
  - [Heal Commands](#heal-commands)
  - [Final Code](#final-code)

**Objective**: Understand Creep body part composition, distinguish Creep capabilities based on parts.

### Part Types
**Each part provides 100 hit points**, functions as follows:

| Part Name | Action Category | Cost | Description |
|----------|-----------------|------|-------------|
| MOVE | Other | 50 | Reduces fatigue by 2 per tick, Creep cannot move without MOVE part |
| CARRY | Resource | 50 | Provides 50 resource capacity, generates movement fatigue when carrying resources |
| ATTACK | Melee | 80 | 30 melee damage, attack range 1 |
| RANGED_ATTACK | Ranged | 150 | 10 ranged damage, attack range 3, can cause AOE damage |
| HEAL | Melee/Ranged | 250 | 12 melee healing, 4 ranged healing, range 3 |
| WORK | Melee (harvest)/Ranged (build) | 100 | Build speed 5/tick, harvest energy 2/tick |
| TOUGH | Other | 10 | Only provides hit points, no special function |

**Ranged AOE Damage**:
| Distance | Damage |
|---------|--------|
| 1 | 10 |
| 2 | 4 |
| 3 | 1 |

Ranged attack automatically chooses between AOE or normal mode based on distance to target.

### Part Order
**Damage Priority Order**: Left to right sequentially takes damage
**Healing Priority Order**: Right to left sequentially receives healing

**Example**:
- `[ATTACK, MOVE]` - Loses attack capability when damaged
- `[MOVE, ATTACK]` - Loses movement capability when damaged

### Capability Filtering and Inspection
**Use `st` module to filter Creeps**:
```python
from builtin import *

# Get different types of friendly Creeps, tuple represents AND logic
WORRIER = get.creep( (st.friend, st.melee) )    # Melee
RANGER = get.creep( (st.friend, st.ranged) )    # Ranged
HEALER = get.creep( (st.friend, st.healable) ) # Healer
ENEMY = get.creep(st.enemy)                  # Enemy
```

**Inspect Creep capabilities**:
```python
def init(k: GlobalKnowledge):
    print("Simple info:", WORRIER.info)
    print("Detailed info:", WORRIER.info.details())
```

### Command Conflicts
**Action Categories**: Resource, Melee, Ranged
**Rule**: In same tick, same category commands will be overridden by later ones

- Melee attack ❌ Melee heal
- Ranged attack ❌ Ranged heal
- Ranged attack ❌ Build

- Ranged attack ✅ Melee heal
- Ranged attack ✅ Harvest

### Heal Commands
`creep.heal(target: Creep, move: MotionOptions | bool = True) -> int`

| Parameter Name | Type | Optional | Default Value | Description |
|---------------|------|----------|---------------|-------------|
| `target` | `Creep` | No | - | Healing target (can be self) |
| `move` | `MotionOptions` \| `bool` | Yes | `True` | Movement control parameter, passing `False` disables movement |

**Return Value**:
- `OK` (0): Operation successfully scheduled
- `ERR_NOT_OWNER` (-1): You are not the creep's owner
- `ERR_INVALID_TARGET` (-7): Target is not valid creep object
- `ERR_NOT_IN_RANGE` (-9): Target too far
- `ERR_NO_BODYPART` (-12): Creep has no HEAL part

**Note**: Automatically chooses melee/ranged healing based on distance, disabling movement avoids command conflicts.

### Final Code
```python
from builtin import *

WORRIER = get.creep( (st.friend, st.melee) )
RANGER = get.creep( (st.friend, st.ranged) )
HEALER = get.creep( (st.friend, st.healable) )
ENEMY = get.creep(st.enemy)

def init(k: GlobalKnowledge):
    pass

def step(k: GlobalKnowledge):
    # Attack commands
    WORRIER.attack(ENEMY)
    RANGER.attack(ENEMY)
    # Heal commands (disable auto movement)
    HEALER.heal(WORRIER, False)
    HEALER.move(WORRIER)  # Manual movement
```
