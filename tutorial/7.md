## 7. Creating New Creeps
  - [Acquiring Objects](#acquiring-objects)
  - [Creep Recipe](#creep-recipe)
  - [Spawn Creeps](#spawn-creeps)
  - [Final Code](#final-code)

This tutorial teaches you how to create Creeps.

New Creeps can be created through `spawn` object (StructureSpawn, abbreviated as spawn).

This section provides 1 `spawn` object and 2 `flag`s. Need to create two Creeps and move them to corresponding `flag` positions.

### Acquiring Objects

First acquire required objects:
```python
from builtin import *

SPAWN = get.spawn()
FLAG0 = get.flag(lambda it: it.x < SPAWN.x)
FLAG1 = get.flag(lambda it: it.x > SPAWN.x)


def init(k: GlobalKnowledge):
    pass


def step(k: GlobalKnowledge):
    pass
```


### Creep Recipe

Before creating Creeps, need to determine its `recipe` (body part configuration). Here is the list of Creep body parts:

| Part Name | Action Category | Cost | Description |
|----------|-----------------|------|-------------|
| MOVE | Other | 50 | Reduces fatigue by 2 per tick, Creep cannot move without MOVE part |
| CARRY | Resource | 50 | Provides 50 resource capacity, generates movement fatigue when carrying resources |
| ATTACK | Melee | 80 | 30 melee damage, attack range 1 |
| RANGED_ATTACK | Ranged | 150 | 10 ranged damage, attack range 3, can cause AOE damage |
| HEAL | Melee/Ranged | 250 | 12 melee healing, 4 ranged healing, range 3 |
| WORK | Melee (harvest)/Ranged (build) | 100 | Build speed 5/tick, harvest energy 2/tick |
| TOUGH | Other | 10 | Only provides hit points, no special function |

For example:
- Mobile Creep recipe: `[MOVE]`
- Melee unit recipe: `[MOVE, ATTACK]`



### Spawn Creeps

`create` is an instance method of `StructureSpawn` class, used to create new Creeps:

| Parameter Name | Type | Optional | Default Value | Description |
|-------|------|----------|---------------|-------------|
| `recipe` | `list[str]` \| `str` | No | - | Body parts array or string for creating creep |
| `creep_name` | `str` \| `None` | Yes | `None` | Optional creep name, if not filled generates format 'c' + id |
| `optimise` | `bool` \| `int` \| `float` \| `list` | Yes | `True` | Optimization parameter, supports five forms:<br>- `True`: Enable fit optimization, use default energy limit<br>- `int` (non-zero): Enable fit optimization, specify energy limit<br>- `float` (0-1): Enable fit optimization, apply default energy limit proportionally<br>- `list`: Polynomial coefficient list, calculate energy limit<br>- `False`/`None`: Disable optimization |
| `direction` | `int` \| `None` | Yes | `None` | Optional spawn direction parameter, e.g., specifying TOP tries in [↑ ↖ ↗] order, creation fails if all blocked |

| Return Value Type | Description |
|-----------|------|
| `int` \| `Creep` | Success returns creep or remaining spawn time (>0), failure returns error code < 0 |

**Error Codes**:
- `OK` (0): Operation successful
- `ERR_NOT_OWNER` (-1): Not Spawn owner
- `ERR_INVALID_ARGS` (-10): Incorrect parameters
- `ERR_NOT_ENOUGH_ENERGY` (-6): Insufficient energy
- `ERR_SPAWN_BUSY` (-4): Spawn is busy
- `ERR_INVALID_TARGET` (-7): Invalid target

*Use `st.creep` to check if return value is creep, more rigorous than `isinstance`.

**Example**: Create two Creeps with recipe `[MOVE]`, spawn directions LEFT and RIGHT respectively

```python
from builtin import *

SPAWN = get.spawn()
FLAG0 = get.flag(lambda it: it.x < SPAWN.x)
FLAG1 = get.flag(lambda it: it.x > SPAWN.x)

CREEP0 = None
CREEP1 = None

def init(k: GlobalKnowledge):
    pass


def step(k: GlobalKnowledge):
    global CREEP0, CREEP1
    if not st.creep(CREEP0):
        CREEP0 = SPAWN.create([MOVE], "Mover0", True, LEFT)
    if not st.creep(CREEP1):
        CREEP1 = SPAWN.create([MOVE], "Mover1", True, RIGHT)
```

### Final Code

Complete code for creating two Creeps and moving them to corresponding Flags:

```python
from builtin import *

SPAWN = get.spawn()
FLAG0 = get.flag(lambda it: it.x < SPAWN.x)
FLAG1 = get.flag(lambda it: it.x > SPAWN.x)

CREEP0 = None
CREEP1 = None


def init(k: GlobalKnowledge):
    pass


def step(k: GlobalKnowledge):
    global CREEP0, CREEP1

    # Spawn phase
    if not st.creep(CREEP0):
        CREEP0 = SPAWN.create([MOVE], "Mover0", True, LEFT)
    if not st.creep(CREEP1):
        CREEP1 = SPAWN.create([MOVE], "Mover1", True, RIGHT)

    # Execution phase
    if st.creep(CREEP0):
        CREEP0.move(FLAG0)
    if st.creep(CREEP1):
        CREEP1.move(FLAG1)
```

